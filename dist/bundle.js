!function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){i(2),t.exports=i(1)},function(t,e,i){},function(t,e,i){"use strict";var n,s;i.r(e),function(t){t.Click="CLICK",t.Hover="HOVER"}(n||(n={})),function(t){t[t.Opened=1]="Opened",t[t.Closed=0]="Closed"}(s||(s={}));class r{constructor(){this.data=[]}getAll(){return this.data}add(t){this.data.push(t)}}class o{constructor(){this.state=s.Closed}static register(){this.instance=new r}static setup(){this.register(),this.boot()}static resetRegister(){this.instance=null}static getInstance(){return this.instance}static init(t){const e=new o;return o.instance.add(e),e.setOptions(t),e.run(),e}static boot(){$(document).on("click",t=>this.onDocumentClick(t));const t=o.getInitialOptions().name;$("."+t+":not([data-"+t+"-auto=false])").each((t,e)=>{this.init({$el:$(e)})})}static onDocumentClick(t){const e=t.target;o.instance.getAll().forEach((function(t){t.$el.find(e).length||t.$el.is(e)||t.$trigger.find(e).length||t.$trigger.is(e)||t.state===s.Opened&&t.close()}))}static getInitialOptions(){return{name:"mrpopover",hoverDelay:200,triggerType:n.Click}}static close(t){this.instance.getAll().forEach(e=>{t.id!==e.id&&e.state===s.Opened&&e.close()})}getId(){return this.id}setOptions(t){this.options=Object.assign(Object.assign({},o.getInitialOptions()),t)}run(){this.$el=this.options.$el,this.options.container&&this.runFromContainer(),this.setOptionsFromDataAttr(),this.id=this.$el.attr("id"),this.defineTrigger(),this.initEventByTrigger()}setOptionsFromDataAttr(){const t=this.$el.data(this.options.name);this.options=Object.assign(Object.assign({},this.options),t)}runFromContainer(){let t=this.options.container;"string"==typeof t&&(t=$(t)),this.$el=t.find(".mrpopover")}runFromElement(){}initEventByTrigger(){this.options.triggerType===n.Click?this.initClickEvent():this.initHoverEvent()}initClickEvent(){this.$trigger.on("click",t=>{t.preventDefault(),this.toggle()})}initHoverEvent(){this.$trigger.find(this.$el).length||(this.$trigger=this.$trigger.add(this.$el)),this.$trigger.on("mouseenter",()=>this.onMouseEnter()).on("mouseleave",()=>this.onMouseLeave())}toggle(t){t=void 0===t?this.getOppositeState():t,o.close(this),t?this.open():this.close()}getOppositeState(){return this.state===s.Opened?s.Closed:s.Opened}open(){this.state=s.Opened,this.$trigger.addClass(this.makeTriggerName()+"--active"),this.$el.addClass(this.options.name+"--open"),this.$el.trigger("mrpopover/open",{instance:this})}close(){clearTimeout(this.timeoutId),this.state=s.Closed,this.$trigger.removeClass(this.makeTriggerName()+"--active"),this.$el.removeClass(this.options.name+"--open"),this.$el.trigger("mrpopover/close",{instance:this})}onMouseEnter(){clearTimeout(this.timeoutId),this.toggle(s.Opened)}onMouseLeave(){this.timeoutId=setTimeout($.proxy(this,"close"),this.options.hoverDelay)}defineTrigger(){const t=this.makeTriggerName();if(this.$trigger=this.findTriggerById(),!this.$trigger.length){if(this.options.triggerType===n.Click)throw new Error('Trigger type cannot be "click" when trigger contains a popup');this.$trigger=this.$el.closest("."+t)}this.$trigger.addClass(t)}getTrigger(){return this.$trigger}getState(){return this.state}findTriggerById(){return $("[data-"+this.options.name+"-target="+this.id+"]")}makeTriggerName(){return this.options.name+"__trigger"}}window.Mrpopover=o,$.fn.extend({mrpopover:function(){return this.each((t,e)=>{o.init({$el:$(e)})})}});e.default=o}]);